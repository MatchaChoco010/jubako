{"version":3,"file":"index-085e0b06.js","sources":["../../src/connection.ts","../../src/rustTypes.ts","../../src/eventToPayload.ts","../../src/applyEvent.ts","../../src/applyCommand.ts","../../src/main.ts"],"sourcesContent":["import { DifferenceCommands } from \"./rustTypes\"\n\nlet path = window.location.host\nlet paths = window.location.pathname.split(\"/\");\nfor (let i = 0; i < paths.length - 1; i++) {\n  if (paths[i] === \"\") continue\n  path += \"/\" + paths[i]\n}\nconst websocket = new WebSocket(`ws://${path}/ws`)\n\nfunction send(obj: any) {\n  if (websocket.readyState === WebSocket.OPEN) {\n    websocket.send(JSON.stringify(obj))\n  }\n}\n\nfunction onopen(callback: () => void) {\n  websocket.onopen = callback\n}\n\nfunction oncommand(callback: (cmds: DifferenceCommands) => void) {\n  websocket.onmessage = (evt) => {\n    const cmds = JSON.parse(evt.data) as DifferenceCommands\n    callback(cmds)\n  }\n}\n\nexport default { send, onopen, oncommand }\n","/*\n Generated by typeshare 1.0.0\n*/\n\nexport type EventHandleId = string;\n\nexport interface HandleEvent {\n\thandle_id: EventHandleId;\n\thandle_events: VNodeEventType[];\n\thandle_prevent_default_events: VNodeEventType[];\n}\n\nexport interface DifferenceCommands {\n\tmain: DifferenceCommand[];\n\tportals: DifferenceCommand[];\n\tstyles: StyleDifferenceCommand[];\n}\n\nexport interface Element {\n\ttag_name: string;\n\tclient_height: number;\n\tclient_width: number;\n\tclient_left: number;\n\tclient_top: number;\n\tscroll_height: number;\n\tscroll_width: number;\n\tscroll_left: number;\n\tscroll_top: number;\n}\n\nexport interface Event {\n\ttarget?: Element;\n}\n\nexport interface MouseEvent {\n\talt_key: boolean;\n\tbutton: number;\n\tbuttons: number;\n\tclient_x: number;\n\tclient_y: number;\n\tctrl_key: boolean;\n\tmeta_key: boolean;\n\tmovement_x: number;\n\tmovement_y: number;\n\toffset_x: number;\n\toffset_y: number;\n\tpage_x: number;\n\tpage_y: number;\n\trelated_target?: Element;\n\tscreen_x: number;\n\tscreen_y: number;\n\tshift_key: boolean;\n\ttarget?: Element;\n\tx: number;\n\ty: number;\n}\n\nexport interface FocusEvent {\n\trelated_target?: Element;\n\ttarget?: Element;\n}\n\nexport interface DragEvent {\n\talt_key: boolean;\n\tbutton: number;\n\tbuttons: number;\n\tclient_x: number;\n\tclient_y: number;\n\tctrl_key: boolean;\n\tmeta_key: boolean;\n\tmovement_x: number;\n\tmovement_y: number;\n\toffset_x: number;\n\toffset_y: number;\n\tpage_x: number;\n\tpage_y: number;\n\trelated_target?: Element;\n\tscreen_x: number;\n\tscreen_y: number;\n\tshift_key: boolean;\n\ttarget?: Element;\n\tx: number;\n\ty: number;\n}\n\nexport interface InputEvent {\n\tdata: string;\n\tinput_type: string;\n\tis_composing: boolean;\n\ttarget?: Element;\n}\n\nexport interface KeyboardEvent {\n\talt_key: boolean;\n\tchar_code: number;\n\tcode: string;\n\tctrl_key: boolean;\n\tkey: string;\n\tkey_code: number;\n\tlocation: number;\n\tmeta_key: boolean;\n\trepeat: boolean;\n\tshift_key: boolean;\n\ttarget?: Element;\n}\n\nexport interface ProgressEvent {\n\tlength_computable: boolean;\n\tloaded: number;\n\ttarget?: Element;\n\ttotal: number;\n}\n\nexport interface SubmitEvent {\n\tsubmitter?: Element;\n\ttarget?: Element;\n}\n\nexport interface WheelEvent {\n\talt_key: boolean;\n\tbutton: number;\n\tbuttons: number;\n\tclient_x: number;\n\tclient_y: number;\n\tctrl_key: boolean;\n\tdelta_mode: number;\n\tdelta_x: number;\n\tdelta_y: number;\n\tdelta_z: number;\n\tmeta_key: boolean;\n\tmovement_x: number;\n\tmovement_y: number;\n\toffset_x: number;\n\toffset_y: number;\n\tpage_x: number;\n\tpage_y: number;\n\tscreen_x: number;\n\tscreen_y: number;\n\tshift_key: boolean;\n\tx: number;\n\ty: number;\n\ttarget?: Element;\n}\n\nexport interface AnimationEvent {\n\tanimation_name: string;\n\telapsed_time: number;\n\tpseudo_element: string;\n\ttarget?: Element;\n}\n\nexport interface PointerEvent {\n\talt_key: boolean;\n\tbutton: number;\n\tbuttons: number;\n\tclient_x: number;\n\tclient_y: number;\n\tctrl_key: boolean;\n\theight: number;\n\tis_primary: boolean;\n\tmeta_key: boolean;\n\tmovement_x: number;\n\tmovement_y: number;\n\toffset_x: number;\n\toffset_y: number;\n\tpage_x: number;\n\tpage_y: number;\n\tpointer_id: number;\n\tpointer_type: string;\n\tpressure: number;\n\trelated_target?: Element;\n\tscreen_x: number;\n\tscreen_y: number;\n\tshift_key: boolean;\n\ttarget?: Element;\n\ttilt_x: number;\n\ttilt_y: number;\n\ttwist: number;\n\twidth: number;\n\tx: number;\n\ty: number;\n}\n\nexport interface Touch {\n\tidentifier: number;\n\tclient_x: number;\n\tclient_y: number;\n\tpage_x: number;\n\tpage_y: number;\n\tradius_x: number;\n\tradius_y: number;\n\trotation_angle: number;\n\tscreen_x: number;\n\tscreen_y: number;\n\ttarget?: Element;\n}\n\nexport interface TouchEvent {\n\talt_key: boolean;\n\tchanged_touches: Touch[];\n\tctrl_key: boolean;\n\tmeta_key: boolean;\n\tshift_key: boolean;\n\ttarget_touches: Touch[];\n\ttouches: Touch[];\n\ttarget?: Element;\n}\n\nexport interface TransitionEvent {\n\telapsed_time: number;\n\tpseudo_element: string;\n\tproperty_name: string;\n\ttarget?: Element;\n}\n\nexport interface VNodeEvent {\n\thandle_id: EventHandleId;\n\tkind: VNodeEventKind;\n}\n\nexport type DifferenceProps =\n\t| { type: \"Add\", content: string }\n\t| { type: \"Remove\", content: string };\n\nexport type DifferenceClass =\n\t| { type: \"Add\", content: string }\n\t| { type: \"Remove\", content: string };\n\nexport type DifferenceEvent =\n\t| { type: \"None\", content?: undefined }\n\t| { type: \"Update\", content: HandleEvent };\n\nexport type DifferenceCommand =\n\t| { type: \"UpdateElement\", content: {\n\tindex: number;\n\tclass_diff: DifferenceClass[];\n\tprops_diff: DifferenceProps[];\n\tevent_diff: DifferenceEvent;\n\tchildren: DifferenceCommand[];\n}}\n\t| { type: \"UpdateText\", content: {\n\tindex: number;\n\tnew_text: string;\n}}\n\t| { type: \"ReplaceToElement\", content: {\n\tindex: number;\n\tnew_tag: string;\n\tclasses: string[];\n\tprops: string[];\n\tevent: HandleEvent;\n\tchildren: DifferenceCommand[];\n}}\n\t| { type: \"ReplaceToText\", content: {\n\tindex: number;\n\ttext: string;\n}}\n\t| { type: \"InsertElement\", content: {\n\tindex: number;\n\ttag: string;\n\tclasses: string[];\n\tprops: string[];\n\tevent: HandleEvent;\n\tchildren: DifferenceCommand[];\n}}\n\t| { type: \"InsertText\", content: {\n\tindex: number;\n\ttext: string;\n}}\n\t| { type: \"Remove\", content: {\n\tindex: number;\n}};\n\nexport type StyleDifferenceCommand =\n\t| { type: \"AddStyle\", content: {\n\tclass_name: string;\n\tvalue: string;\n}}\n\t| { type: \"RemoveStyle\", content: {\n\tclass_name: string;\n}};\n\nexport type VNodeEventKind =\n\t| { type: \"Abort\", content: Event }\n\t| { type: \"AnimationCancel\", content: AnimationEvent }\n\t| { type: \"AnimationEnd\", content: AnimationEvent }\n\t| { type: \"AnimationIteration\", content: AnimationEvent }\n\t| { type: \"AnimationStart\", content: AnimationEvent }\n\t| { type: \"AuxClick\", content: MouseEvent }\n\t| { type: \"Blur\", content: FocusEvent }\n\t| { type: \"Cancel\", content: Event }\n\t| { type: \"CanPlay\", content: Event }\n\t| { type: \"CanPlayThrough\", content: Event }\n\t| { type: \"Change\", content: Event }\n\t| { type: \"Click\", content: MouseEvent }\n\t| { type: \"Close\", content: Event }\n\t| { type: \"ContextMenu\", content: MouseEvent }\n\t| { type: \"Copy\", content: Event }\n\t| { type: \"CueChange\", content: Event }\n\t| { type: \"Cut\", content: Event }\n\t| { type: \"DoubleClick\", content: MouseEvent }\n\t| { type: \"Drag\", content: DragEvent }\n\t| { type: \"DragEnd\", content: DragEvent }\n\t| { type: \"DragEnter\", content: DragEvent }\n\t| { type: \"DragExit\", content: DragEvent }\n\t| { type: \"DragLeave\", content: DragEvent }\n\t| { type: \"DragOver\", content: DragEvent }\n\t| { type: \"DragStart\", content: DragEvent }\n\t| { type: \"Drop\", content: DragEvent }\n\t| { type: \"DurationChange\", content: Event }\n\t| { type: \"Emptied\", content: Event }\n\t| { type: \"Ended\", content: Event }\n\t| { type: \"Error\", content: Event }\n\t| { type: \"Focus\", content: FocusEvent }\n\t| { type: \"FocusIn\", content: FocusEvent }\n\t| { type: \"FocusOut\", content: FocusEvent }\n\t| { type: \"FormData\", content: Event }\n\t| { type: \"GotPointerCapture\", content: PointerEvent }\n\t| { type: \"Input\", content: InputEvent }\n\t| { type: \"Invalid\", content: Event }\n\t| { type: \"KeyDown\", content: KeyboardEvent }\n\t| { type: \"KeyPress\", content: KeyboardEvent }\n\t| { type: \"KeyUp\", content: KeyboardEvent }\n\t| { type: \"Load\", content: Event }\n\t| { type: \"LoadEnd\", content: ProgressEvent }\n\t| { type: \"LoadedData\", content: Event }\n\t| { type: \"LoadedMetadata\", content: Event }\n\t| { type: \"LoadStart\", content: ProgressEvent }\n\t| { type: \"LostPointerCapture\", content: PointerEvent }\n\t| { type: \"MouseDown\", content: MouseEvent }\n\t| { type: \"MouseEnter\", content: MouseEvent }\n\t| { type: \"MouseLeave\", content: MouseEvent }\n\t| { type: \"MouseMove\", content: MouseEvent }\n\t| { type: \"MouseOut\", content: MouseEvent }\n\t| { type: \"MouseOver\", content: MouseEvent }\n\t| { type: \"MouseUp\", content: MouseEvent }\n\t| { type: \"Paste\", content: Event }\n\t| { type: \"Pause\", content: Event }\n\t| { type: \"Play\", content: Event }\n\t| { type: \"Playing\", content: Event }\n\t| { type: \"PointerCancel\", content: PointerEvent }\n\t| { type: \"PointerDown\", content: PointerEvent }\n\t| { type: \"PointerEnter\", content: PointerEvent }\n\t| { type: \"PointerLeave\", content: PointerEvent }\n\t| { type: \"PointerMove\", content: PointerEvent }\n\t| { type: \"PointerOut\", content: PointerEvent }\n\t| { type: \"PointerOver\", content: PointerEvent }\n\t| { type: \"PointerUp\", content: PointerEvent }\n\t| { type: \"Progress\", content: ProgressEvent }\n\t| { type: \"RateChange\", content: Event }\n\t| { type: \"Reset\", content: Event }\n\t| { type: \"Resize\", content: Event }\n\t| { type: \"Scroll\", content: Event }\n\t| { type: \"SecurityPolicyViolation\", content: Event }\n\t| { type: \"Seeked\", content: Event }\n\t| { type: \"Seeking\", content: Event }\n\t| { type: \"Select\", content: Event }\n\t| { type: \"SelectionChange\", content: Event }\n\t| { type: \"SelectStart\", content: Event }\n\t| { type: \"Show\", content: Event }\n\t| { type: \"SlotChange\", content: Event }\n\t| { type: \"Stalled\", content: Event }\n\t| { type: \"Submit\", content: SubmitEvent }\n\t| { type: \"Suspend\", content: Event }\n\t| { type: \"TimeUpdate\", content: Event }\n\t| { type: \"Toggle\", content: Event }\n\t| { type: \"TouchCancel\", content: TouchEvent }\n\t| { type: \"TouchEnd\", content: TouchEvent }\n\t| { type: \"TouchMove\", content: TouchEvent }\n\t| { type: \"TouchStart\", content: TouchEvent }\n\t| { type: \"TransitionCancel\", content: TransitionEvent }\n\t| { type: \"TransitionEnd\", content: TransitionEvent }\n\t| { type: \"TransitionRun\", content: TransitionEvent }\n\t| { type: \"TransitionStart\", content: TransitionEvent }\n\t| { type: \"VolumeChange\", content: Event }\n\t| { type: \"Waiting\", content: Event }\n\t| { type: \"Wheel\", content: WheelEvent };\n\nexport enum VNodeEventType {\n\tAbort = \"Abort\",\n\tAnimationCancel = \"AnimationCancel\",\n\tAnimationEnd = \"AnimationEnd\",\n\tAnimationIteration = \"AnimationIteration\",\n\tAnimationStart = \"AnimationStart\",\n\tAuxClick = \"AuxClick\",\n\tBlur = \"Blur\",\n\tCancel = \"Cancel\",\n\tCanPlay = \"CanPlay\",\n\tCanPlayThrough = \"CanPlayThrough\",\n\tChange = \"Change\",\n\tClick = \"Click\",\n\tClose = \"Close\",\n\tContextMenu = \"ContextMenu\",\n\tCopy = \"Copy\",\n\tCueChange = \"CueChange\",\n\tCut = \"Cut\",\n\tDoubleClick = \"DoubleClick\",\n\tDrag = \"Drag\",\n\tDragEnd = \"DragEnd\",\n\tDragEnter = \"DragEnter\",\n\tDragLeave = \"DragLeave\",\n\tDragOver = \"DragOver\",\n\tDragStart = \"DragStart\",\n\tDrop = \"Drop\",\n\tDurationChange = \"DurationChange\",\n\tEmptied = \"Emptied\",\n\tEnded = \"Ended\",\n\tError = \"Error\",\n\tFocus = \"Focus\",\n\tFocusIn = \"FocusIn\",\n\tFocusOut = \"FocusOut\",\n\tFormData = \"FormData\",\n\tGotPointerCapture = \"GotPointerCapture\",\n\tInput = \"Input\",\n\tInvalid = \"Invalid\",\n\tKeyDown = \"KeyDown\",\n\tKeyPress = \"KeyPress\",\n\tKeyUp = \"KeyUp\",\n\tLoad = \"Load\",\n\tLoadedData = \"LoadedData\",\n\tLoadedMetadata = \"LoadedMetadata\",\n\tLoadStart = \"LoadStart\",\n\tLostPointerCapture = \"LostPointerCapture\",\n\tMouseDown = \"MouseDown\",\n\tMouseEnter = \"MouseEnter\",\n\tMouseLeave = \"MouseLeave\",\n\tMouseMove = \"MouseMove\",\n\tMouseOut = \"MouseOut\",\n\tMouseOver = \"MouseOver\",\n\tMouseUp = \"MouseUp\",\n\tPaste = \"Paste\",\n\tPause = \"Pause\",\n\tPlay = \"Play\",\n\tPlaying = \"Playing\",\n\tPointerCancel = \"PointerCancel\",\n\tPointerDown = \"PointerDown\",\n\tPointerEnter = \"PointerEnter\",\n\tPointerLeave = \"PointerLeave\",\n\tPointerMove = \"PointerMove\",\n\tPointerOut = \"PointerOut\",\n\tPointerOver = \"PointerOver\",\n\tPointerUp = \"PointerUp\",\n\tProgress = \"Progress\",\n\tRateChange = \"RateChange\",\n\tReset = \"Reset\",\n\tResize = \"Resize\",\n\tScroll = \"Scroll\",\n\tSecurityPolicyViolation = \"SecurityPolicyViolation\",\n\tSeeked = \"Seeked\",\n\tSeeking = \"Seeking\",\n\tSelect = \"Select\",\n\tSelectionChange = \"SelectionChange\",\n\tSelectStart = \"SelectStart\",\n\tSlotChange = \"SlotChange\",\n\tStalled = \"Stalled\",\n\tSubmit = \"Submit\",\n\tSuspend = \"Suspend\",\n\tTimeUpdate = \"TimeUpdate\",\n\tToggle = \"Toggle\",\n\tTouchCancel = \"TouchCancel\",\n\tTouchEnd = \"TouchEnd\",\n\tTouchMove = \"TouchMove\",\n\tTouchStart = \"TouchStart\",\n\tTransitionCancel = \"TransitionCancel\",\n\tTransitionEnd = \"TransitionEnd\",\n\tTransitionRun = \"TransitionRun\",\n\tTransitionStart = \"TransitionStart\",\n\tVolumeChange = \"VolumeChange\",\n\tWaiting = \"Waiting\",\n\tWheel = \"Wheel\",\n}\n","import {\n  Element as ElementPayload,\n  Event as EventPayload,\n  MouseEvent as MouseEventPayload,\n  FocusEvent as FocusEventPayload,\n  DragEvent as DragEventPayload,\n  InputEvent as InputEventPayload,\n  KeyboardEvent as KeyboardEventPayload,\n  ProgressEvent as ProgressEventPayload,\n  SubmitEvent as SubmitEventPayload,\n  WheelEvent as WheelEventPayload,\n  AnimationEvent as AnimationEventPayload,\n  TouchEvent as TouchEventPayload,\n  PointerEvent as PointerEventPayload,\n  TransitionEvent as TransitionEventPayload,\n} from \"./rustTypes\"\n\nexport function eventToPayload(e: Event): EventPayload {\n  if (e.target !== null && e.target as Element) {\n    const target = e.target as Element\n    return {\n      target: {\n        tag_name: target.tagName,\n        client_height: target.clientHeight,\n        client_width: target.clientWidth,\n        client_left: target.clientLeft,\n        client_top: target.clientTop,\n        scroll_height: target.scrollHeight,\n        scroll_width: target.scrollWidth,\n        scroll_left: target.scrollLeft,\n        scroll_top: target.scrollTop,\n      }\n    }\n  } else {\n    return {\n      target: undefined,\n    }\n  }\n}\n\nexport function mouseEventToPayload(e: MouseEvent): MouseEventPayload {\n  let target: ElementPayload | undefined = undefined\n  if (e.target !== null && e.target as Element !== null) {\n    const targetElem = e.target as Element\n    target = {\n        tag_name: targetElem.tagName,\n        client_height: targetElem.clientHeight,\n        client_width: targetElem.clientWidth,\n        client_left: targetElem.clientLeft,\n        client_top: targetElem.clientTop,\n        scroll_height: targetElem.scrollHeight,\n        scroll_width: targetElem.scrollWidth,\n        scroll_left: targetElem.scrollLeft,\n        scroll_top: targetElem.scrollTop,\n      }\n  }\n  let related_target: ElementPayload | undefined = undefined\n  if (e.relatedTarget !== null && e.relatedTarget as Element !== null) {\n    const relatedTargetElem = e.relatedTarget as Element\n    related_target = {\n      tag_name: relatedTargetElem.tagName,\n      client_height: relatedTargetElem.clientHeight,\n      client_width: relatedTargetElem.clientWidth,\n      client_left: relatedTargetElem.clientLeft,\n      client_top: relatedTargetElem.clientTop,\n      scroll_height: relatedTargetElem.scrollHeight,\n      scroll_width: relatedTargetElem.scrollWidth,\n      scroll_left: relatedTargetElem.scrollLeft,\n      scroll_top: relatedTargetElem.scrollTop,\n    }\n  }\n  return {\n    alt_key: e.altKey,\n    button: e.button,\n    buttons: e.buttons,\n    client_x: e.clientX,\n    client_y: e.clientY,\n    ctrl_key: e.ctrlKey,\n    meta_key: e.metaKey,\n    movement_x: e.movementX,\n    movement_y: e.movementY,\n    offset_x: e.offsetX,\n    offset_y: e.offsetY,\n    page_x: e.pageX,\n    page_y: e.pageY,\n    related_target,\n    screen_x: e.screenX,\n    screen_y: e.screenY,\n    shift_key: e.shiftKey,\n    target,\n    x: e.x,\n    y: e.y,\n  }\n}\n\nexport function focusEventToPayload(e: FocusEvent): FocusEventPayload {\n  let target: ElementPayload | undefined = undefined\n  if (e.target !== null && e.target as Element !== null) {\n    const targetElem = e.target as Element\n    target = {\n        tag_name: targetElem.tagName,\n        client_height: targetElem.clientHeight,\n        client_width: targetElem.clientWidth,\n        client_left: targetElem.clientLeft,\n        client_top: targetElem.clientTop,\n        scroll_height: targetElem.scrollHeight,\n        scroll_width: targetElem.scrollWidth,\n        scroll_left: targetElem.scrollLeft,\n        scroll_top: targetElem.scrollTop,\n      }\n  }\n  let related_target: ElementPayload | undefined = undefined\n  if (e.relatedTarget !== null && e.relatedTarget as Element !== null) {\n    const relatedTargetElem = e.relatedTarget as Element\n    related_target = {\n      tag_name: relatedTargetElem.tagName,\n      client_height: relatedTargetElem.clientHeight,\n      client_width: relatedTargetElem.clientWidth,\n      client_left: relatedTargetElem.clientLeft,\n      client_top: relatedTargetElem.clientTop,\n      scroll_height: relatedTargetElem.scrollHeight,\n      scroll_width: relatedTargetElem.scrollWidth,\n      scroll_left: relatedTargetElem.scrollLeft,\n      scroll_top: relatedTargetElem.scrollTop,\n    }\n  }\n  return { related_target, target }\n}\n\nexport function dragEventToPayload(e: DragEvent): DragEventPayload {\n  let target: ElementPayload | undefined = undefined\n  if (e.target !== null && e.target as Element !== null) {\n    const targetElem = e.target as Element\n    target = {\n        tag_name: targetElem.tagName,\n        client_height: targetElem.clientHeight,\n        client_width: targetElem.clientWidth,\n        client_left: targetElem.clientLeft,\n        client_top: targetElem.clientTop,\n        scroll_height: targetElem.scrollHeight,\n        scroll_width: targetElem.scrollWidth,\n        scroll_left: targetElem.scrollLeft,\n        scroll_top: targetElem.scrollTop,\n      }\n  }\n  let related_target: ElementPayload | undefined = undefined\n  if (e.relatedTarget !== null && e.relatedTarget as Element !== null) {\n    const relatedTargetElem = e.relatedTarget as Element\n    related_target = {\n      tag_name: relatedTargetElem.tagName,\n      client_height: relatedTargetElem.clientHeight,\n      client_width: relatedTargetElem.clientWidth,\n      client_left: relatedTargetElem.clientLeft,\n      client_top: relatedTargetElem.clientTop,\n      scroll_height: relatedTargetElem.scrollHeight,\n      scroll_width: relatedTargetElem.scrollWidth,\n      scroll_left: relatedTargetElem.scrollLeft,\n      scroll_top: relatedTargetElem.scrollTop,\n    }\n  }\n  return {\n    alt_key: e.altKey,\n    button: e.button,\n    buttons: e.buttons,\n    client_x: e.clientX,\n    client_y: e.clientY,\n    ctrl_key: e.ctrlKey,\n    meta_key: e.metaKey,\n    movement_x: e.movementX,\n    movement_y: e.movementY,\n    offset_x: e.offsetX,\n    offset_y: e.offsetY,\n    page_x: e.pageX,\n    page_y: e.pageY,\n    related_target,\n    screen_x: e.screenX,\n    screen_y: e.screenY,\n    shift_key: e.shiftKey,\n    target,\n    x: e.x,\n    y: e.y,\n  }\n}\n\nexport function inputEventToPayload(e: InputEvent): InputEventPayload {\n  let target: ElementPayload | undefined = undefined\n  if (e.target !== null && e.target as Element !== null) {\n    const targetElem = e.target as Element\n    target = {\n        tag_name: targetElem.tagName,\n        client_height: targetElem.clientHeight,\n        client_width: targetElem.clientWidth,\n        client_left: targetElem.clientLeft,\n        client_top: targetElem.clientTop,\n        scroll_height: targetElem.scrollHeight,\n        scroll_width: targetElem.scrollWidth,\n        scroll_left: targetElem.scrollLeft,\n        scroll_top: targetElem.scrollTop,\n      }\n  }\n  return {\n    data: e.data ?? \"\",\n    input_type: e.inputType,\n    is_composing: e.isComposing,\n    target\n  }\n}\n\nexport function keyboardEventToPayload(e: KeyboardEvent): KeyboardEventPayload {\n  let target: ElementPayload | undefined = undefined\n  if (e.target !== null && e.target as Element !== null) {\n    const targetElem = e.target as Element\n    target = {\n        tag_name: targetElem.tagName,\n        client_height: targetElem.clientHeight,\n        client_width: targetElem.clientWidth,\n        client_left: targetElem.clientLeft,\n        client_top: targetElem.clientTop,\n        scroll_height: targetElem.scrollHeight,\n        scroll_width: targetElem.scrollWidth,\n        scroll_left: targetElem.scrollLeft,\n        scroll_top: targetElem.scrollTop,\n      }\n  }\n  return {\n    alt_key: e.altKey,\n    char_code: e.charCode,\n    code: e.code,\n    ctrl_key: e.ctrlKey,\n    key: e.key,\n    key_code: e.keyCode,\n    location: e.location,\n    meta_key: e.metaKey,\n    repeat: e.repeat,\n    shift_key: e.shiftKey,\n    target,\n  }\n}\n\nexport function progressEventToPayload(e: ProgressEvent): ProgressEventPayload {\n  let target: ElementPayload | undefined = undefined\n  if (e.target !== null && e.target as Element !== null) {\n    const targetElem = e.target as Element\n    target = {\n        tag_name: targetElem.tagName,\n        client_height: targetElem.clientHeight,\n        client_width: targetElem.clientWidth,\n        client_left: targetElem.clientLeft,\n        client_top: targetElem.clientTop,\n        scroll_height: targetElem.scrollHeight,\n        scroll_width: targetElem.scrollWidth,\n        scroll_left: targetElem.scrollLeft,\n        scroll_top: targetElem.scrollTop,\n      }\n  }\n  return {\n    length_computable: e.lengthComputable,\n    loaded: e.loaded,\n    target,\n    total: e.total,\n  }\n}\n\nexport function submitEventToPayload(e: SubmitEvent): SubmitEventPayload {\n  let target: ElementPayload | undefined = undefined\n  if (e.target !== null && e.target as Element !== null) {\n    const targetElem = e.target as Element\n    target = {\n        tag_name: targetElem.tagName,\n        client_height: targetElem.clientHeight,\n        client_width: targetElem.clientWidth,\n        client_left: targetElem.clientLeft,\n        client_top: targetElem.clientTop,\n        scroll_height: targetElem.scrollHeight,\n        scroll_width: targetElem.scrollWidth,\n        scroll_left: targetElem.scrollLeft,\n        scroll_top: targetElem.scrollTop,\n      }\n  }\n  let submitter: ElementPayload | undefined = undefined\n  if (e.submitter !== null && e.submitter as Element !== null) {\n    const submitter_elem = e.submitter as Element\n    submitter = {\n      tag_name: submitter_elem.tagName,\n      client_height: submitter_elem.clientHeight,\n      client_width: submitter_elem.clientWidth,\n      client_left: submitter_elem.clientLeft,\n      client_top: submitter_elem.clientTop,\n      scroll_height: submitter_elem.scrollHeight,\n      scroll_width: submitter_elem.scrollWidth,\n      scroll_left: submitter_elem.scrollLeft,\n      scroll_top: submitter_elem.scrollTop,\n    }\n  }\n  return { submitter, target }\n}\n\nexport function wheelEventToPayload(e: WheelEvent): WheelEventPayload {\n  let target: ElementPayload | undefined = undefined\n  if (e.target !== null && e.target as Element !== null) {\n    const targetElem = e.target as Element\n    target = {\n        tag_name: targetElem.tagName,\n        client_height: targetElem.clientHeight,\n        client_width: targetElem.clientWidth,\n        client_left: targetElem.clientLeft,\n        client_top: targetElem.clientTop,\n        scroll_height: targetElem.scrollHeight,\n        scroll_width: targetElem.scrollWidth,\n        scroll_left: targetElem.scrollLeft,\n        scroll_top: targetElem.scrollTop,\n      }\n  }\n  return {\n    alt_key: e.altKey,\n    button: e.button,\n    buttons: e.buttons,\n    client_x: e.clientX,\n    client_y: e.clientY,\n    ctrl_key: e.ctrlKey,\n    delta_mode: e.deltaMode,\n    delta_x: e.deltaX,\n    delta_y: e.deltaY,\n    delta_z: e.deltaZ,\n    meta_key: e.metaKey,\n    movement_x: e.movementX,\n    movement_y: e.movementY,\n    offset_x: e.offsetX,\n    offset_y: e.offsetY,\n    page_x: e.pageX,\n    page_y: e.pageY,\n    screen_x: e.screenX,\n    screen_y: e.screenY,\n    shift_key: e.shiftKey,\n    x: e.x,\n    y: e.y,\n    target,\n  }\n}\n\nexport function animationEventToPayload(e: AnimationEvent): AnimationEventPayload {\n  let target: ElementPayload | undefined = undefined\n  if (e.target !== null && e.target as Element !== null) {\n    const targetElem = e.target as Element\n    target = {\n        tag_name: targetElem.tagName,\n        client_height: targetElem.clientHeight,\n        client_width: targetElem.clientWidth,\n        client_left: targetElem.clientLeft,\n        client_top: targetElem.clientTop,\n        scroll_height: targetElem.scrollHeight,\n        scroll_width: targetElem.scrollWidth,\n        scroll_left: targetElem.scrollLeft,\n        scroll_top: targetElem.scrollTop,\n      }\n  }\n  return {\n    animation_name: e.animationName,\n    elapsed_time: e.elapsedTime,\n    pseudo_element: e.pseudoElement,\n    target,\n  }\n}\n\nexport function pointerEventToPayload(e: PointerEvent): PointerEventPayload {\n  let target: ElementPayload | undefined = undefined\n  if (e.target !== null && e.target as Element !== null) {\n    const targetElem = e.target as Element\n    target = {\n        tag_name: targetElem.tagName,\n        client_height: targetElem.clientHeight,\n        client_width: targetElem.clientWidth,\n        client_left: targetElem.clientLeft,\n        client_top: targetElem.clientTop,\n        scroll_height: targetElem.scrollHeight,\n        scroll_width: targetElem.scrollWidth,\n        scroll_left: targetElem.scrollLeft,\n        scroll_top: targetElem.scrollTop,\n      }\n  }\n\n  let related_target: ElementPayload | undefined = undefined\n  if (e.relatedTarget !== null && e.relatedTarget as Element !== null) {\n    const relatedTargetElem = e.relatedTarget as Element\n    related_target = {\n      tag_name: relatedTargetElem.tagName,\n      client_height: relatedTargetElem.clientHeight,\n      client_width: relatedTargetElem.clientWidth,\n      client_left: relatedTargetElem.clientLeft,\n      client_top: relatedTargetElem.clientTop,\n      scroll_height: relatedTargetElem.scrollHeight,\n      scroll_width: relatedTargetElem.scrollWidth,\n      scroll_left: relatedTargetElem.scrollLeft,\n      scroll_top: relatedTargetElem.scrollTop,\n    }\n  }\n  return {\n    alt_key: e.altKey,\n    button: e.button,\n    buttons: e.buttons,\n    client_x: e.clientX,\n    client_y: e.clientY,\n    ctrl_key: e.ctrlKey,\n    height: e.height,\n    is_primary: e.isPrimary,\n    meta_key: e.metaKey,\n    movement_x: e.movementX,\n    movement_y: e.movementY,\n    offset_x: e.offsetX,\n    offset_y: e.offsetY,\n    page_x: e.pageX,\n    page_y: e.pageY,\n    pointer_id: e.pointerId,\n    pointer_type: e.pointerType,\n    pressure: e.pressure,\n    related_target,\n    screen_x: e.screenX,\n    screen_y: e.screenY,\n    shift_key: e.shiftKey,\n    target,\n    tilt_x: e.tiltX,\n    tilt_y: e.tiltY,\n    twist: e.twist,\n    width: e.width,\n    x: e.x,\n    y: e.y,\n  }\n}\n\nexport function touchEventToPayload(e: TouchEvent): TouchEventPayload {\n  let target: ElementPayload | undefined = undefined\n  if (e.target !== null && e.target as Element !== null) {\n    const targetElem = e.target as Element\n    target = {\n        tag_name: targetElem.tagName,\n        client_height: targetElem.clientHeight,\n        client_width: targetElem.clientWidth,\n        client_left: targetElem.clientLeft,\n        client_top: targetElem.clientTop,\n        scroll_height: targetElem.scrollHeight,\n        scroll_width: targetElem.scrollWidth,\n        scroll_left: targetElem.scrollLeft,\n        scroll_top: targetElem.scrollTop,\n      }\n  }\n  const changed_touches = []\n  for (let i = 0; i < e.changedTouches.length; i++) {\n    const touch = e.changedTouches[i]\n    let touchTarget: ElementPayload | undefined = undefined\n    if (touch.target !== null && touch.target as Element !== null) {\n      const touchTargetElem = touch.target as Element\n      touchTarget = {\n        tag_name: touchTargetElem.tagName,\n        client_height: touchTargetElem.clientHeight,\n        client_width: touchTargetElem.clientWidth,\n        client_left: touchTargetElem.clientLeft,\n        client_top: touchTargetElem.clientTop,\n        scroll_height: touchTargetElem.scrollHeight,\n        scroll_width: touchTargetElem.scrollWidth,\n        scroll_left: touchTargetElem.scrollLeft,\n        scroll_top: touchTargetElem.scrollTop,\n      }\n    }\n    changed_touches.push({\n      identifier: touch.identifier,\n      client_x: touch.clientX,\n      client_y: touch.clientY,\n      page_x: touch.pageX,\n      page_y: touch.pageY,\n      radius_x: touch.radiusX,\n      radius_y: touch.radiusY,\n      rotation_angle: touch.rotationAngle,\n      screen_x: touch.screenX,\n      screen_y: touch.screenY,\n      target: touchTarget,\n    })\n  }\n  const target_touches = []\n  for (let i = 0; i < e.targetTouches.length; i++) {\n    const touch = e.targetTouches[i]\n    let touchTarget: ElementPayload | undefined = undefined\n    if (touch.target !== null && touch.target as Element !== null) {\n      const touchTargetElem = touch.target as Element\n      touchTarget = {\n        tag_name: touchTargetElem.tagName,\n        client_height: touchTargetElem.clientHeight,\n        client_width: touchTargetElem.clientWidth,\n        client_left: touchTargetElem.clientLeft,\n        client_top: touchTargetElem.clientTop,\n        scroll_height: touchTargetElem.scrollHeight,\n        scroll_width: touchTargetElem.scrollWidth,\n        scroll_left: touchTargetElem.scrollLeft,\n        scroll_top: touchTargetElem.scrollTop,\n      }\n    }\n    target_touches.push({\n      identifier: touch.identifier,\n      client_x: touch.clientX,\n      client_y: touch.clientY,\n      page_x: touch.pageX,\n      page_y: touch.pageY,\n      radius_x: touch.radiusX,\n      radius_y: touch.radiusY,\n      rotation_angle: touch.rotationAngle,\n      screen_x: touch.screenX,\n      screen_y: touch.screenY,\n      target: touchTarget,\n    })\n  }\n  const touches = []\n  for (let i = 0; i < e.touches.length; i++) {\n    const touch = e.touches[i]\n    let touchTarget: ElementPayload | undefined = undefined\n    if (touch.target !== null && touch.target as Element !== null) {\n      const touchTargetElem = touch.target as Element\n      touchTarget = {\n        tag_name: touchTargetElem.tagName,\n        client_height: touchTargetElem.clientHeight,\n        client_width: touchTargetElem.clientWidth,\n        client_left: touchTargetElem.clientLeft,\n        client_top: touchTargetElem.clientTop,\n        scroll_height: touchTargetElem.scrollHeight,\n        scroll_width: touchTargetElem.scrollWidth,\n        scroll_left: touchTargetElem.scrollLeft,\n        scroll_top: touchTargetElem.scrollTop,\n      }\n    }\n    touches.push({\n      identifier: touch.identifier,\n      client_x: touch.clientX,\n      client_y: touch.clientY,\n      page_x: touch.pageX,\n      page_y: touch.pageY,\n      radius_x: touch.radiusX,\n      radius_y: touch.radiusY,\n      rotation_angle: touch.rotationAngle,\n      screen_x: touch.screenX,\n      screen_y: touch.screenY,\n      target: touchTarget,\n    })\n  }\n  return {\n    alt_key: e.altKey,\n    changed_touches,\n    ctrl_key: e.ctrlKey,\n    meta_key: e.metaKey,\n    shift_key: e.shiftKey,\n    target_touches,\n    touches,\n    target,\n  }\n}\n\nexport function transitionEventToPayload(e: TransitionEvent): TransitionEventPayload {\n  let target: ElementPayload | undefined = undefined\n  if (e.target !== null && e.target as Element !== null) {\n    const targetElem = e.target as Element\n    target = {\n        tag_name: targetElem.tagName,\n        client_height: targetElem.clientHeight,\n        client_width: targetElem.clientWidth,\n        client_left: targetElem.clientLeft,\n        client_top: targetElem.clientTop,\n        scroll_height: targetElem.scrollHeight,\n        scroll_width: targetElem.scrollWidth,\n        scroll_left: targetElem.scrollLeft,\n        scroll_top: targetElem.scrollTop,\n      }\n  }\n  return {\n    elapsed_time: e.elapsedTime,\n    property_name: e.propertyName,\n    pseudo_element: e.pseudoElement,\n    target,\n  }\n}\n","import { HandleEvent, VNodeEventType } from \"./rustTypes\"\nimport connection from \"./connection\"\nimport {\n  eventToPayload,\n  dragEventToPayload,\n  focusEventToPayload,\n  inputEventToPayload,\n  mouseEventToPayload,\n  touchEventToPayload,\n  wheelEventToPayload,\n  submitEventToPayload,\n  pointerEventToPayload,\n  keyboardEventToPayload,\n  progressEventToPayload,\n  animationEventToPayload,\n  transitionEventToPayload\n} from \"./eventToPayload\"\n\n// handling events and send them to jubako server.\nexport function applyEvent(elem: HTMLElement, eventHandle: HandleEvent) {\n  const e = elem as any\n  const { handle_id, handle_events, handle_prevent_default_events } = eventHandle\n\n  // handle events.\n  for (const event of handle_events) {\n    // there is no `oncancel`, `focusin`, `focusout` event in HTMLElement\n    // so that we need to use `addEventListener` instead of `oncancel` etc.\n    // we want to handle resize event not only when window resized\n    // but also when element resized, so we use ResizeObserver.\n    if (event === \"Cancel\") {\n      if (e.c instanceof Function) {\n        elem.removeEventListener('cancel', e.c)\n      }\n      const oncancel = (e: Event) => {\n        const payload = eventToPayload(e)\n        connection.send({\n          handle_id,\n          kind: { type: \"Cancel\", content: payload }\n        })\n      }\n      elem.addEventListener('cancel', oncancel)\n      e.c = oncancel\n    } else if (event === \"FocusIn\") {\n      if (e.fi instanceof Function) {\n        e.removeEventListener('focusin', e.fi)\n      }\n      const onfocusin = (e: FocusEvent) => {\n        const payload = focusEventToPayload(e)\n        connection.send({\n          handle_id,\n          kind: { type: \"FocusIn\", content: payload }\n        })\n      }\n      elem.addEventListener(\"focusin\", onfocusin)\n      e.fi = onfocusin\n    } else if (event === \"FocusOut\") {\n      if (e.fi instanceof Function) {\n        e.removeEventListener('focusout', e.fi)\n      }\n      const onfocusin = (e: FocusEvent) => {\n        const payload = focusEventToPayload(e)\n        connection.send({\n          handle_id,\n          kind: { type: \"FocusOut\", content: payload }\n        })\n      }\n      elem.addEventListener(\"focusout\", onfocusin)\n      e.fi = onfocusin\n    } else if (event === \"Resize\") {\n      const ro = new ResizeObserver((entries) => {\n        for (let entry of entries) {\n          let target: any = null\n          if (entry.target !== null || entry.target as Element !== null) {\n            const targetElem = entry.target as Element\n            target = {\n              element_name: targetElem.tagName,\n              client_height: targetElem.clientHeight,\n              client_width: targetElem.clientWidth,\n              client_left: targetElem.clientLeft,\n              client_top: targetElem.clientTop,\n              scroll_height: targetElem.scrollHeight,\n              scroll_width: targetElem.scrollWidth,\n              scroll_left: targetElem.scrollLeft,\n              scroll_top: targetElem.scrollTop,\n            }\n          }\n        connection.send({\n          handle_id,\n          kind: { type: \"Resize\", content: target }\n        })\n        }\n      })\n      ro.observe(elem)\n      e[\"ro\"] = ro\n    } else {\n      e[`on${event.toLowerCase()}`] = (e: Event) => {\n        if (e instanceof DragEvent) {\n          const payload = dragEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else if (e instanceof FocusEvent) {\n          const payload = focusEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else if (e instanceof InputEvent) {\n          const payload = inputEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else if (e instanceof MouseEvent) {\n          const payload = mouseEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else if (e instanceof TouchEvent) {\n          const payload = touchEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else if (e instanceof WheelEvent) {\n          const payload = wheelEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else if (e instanceof SubmitEvent) {\n          const payload = submitEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else if (e instanceof PointerEvent) {\n          const payload = pointerEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else if (e instanceof KeyboardEvent) {\n          const payload = keyboardEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else if (e instanceof ProgressEvent) {\n          const payload = progressEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else if (e instanceof AnimationEvent) {\n          const payload = animationEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else if (e instanceof TransitionEvent) {\n          const payload = transitionEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else {\n          const payload = eventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        }\n      }\n    }\n  }\n\n  // handle prevent default events\n  for (const event of handle_prevent_default_events) {\n    // same as above, we use `addEventListener` instead of `oncancel` etc.\n    // and same as above, we use ResizeObserver to detect resize.\n    if (event === \"Cancel\") {\n      if (e.c instanceof Function) {\n        elem.removeEventListener('cancel', e.c)\n      }\n      const oncancel = (e: Event) => {\n        e.preventDefault()\n        const payload = eventToPayload(e)\n        connection.send({\n          handle_id,\n          kind: { type: \"Cancel\", content: payload }\n        })\n      }\n      elem.addEventListener('cancel', oncancel)\n      e.c = oncancel\n    } else if (event === \"FocusIn\") {\n      if (e.fi instanceof Function) {\n        e.removeEventListener('focusin', e.fi)\n      }\n      const onfocusin = (e: FocusEvent) => {\n        e.preventDefault()\n        const payload = focusEventToPayload(e)\n        connection.send({\n          handle_id,\n          kind: { type: \"FocusIn\", content: payload }\n        })\n      }\n      elem.addEventListener(\"focusin\", onfocusin)\n      e.fi = onfocusin\n    } else if (event === \"FocusOut\") {\n      if (e.fi instanceof Function) {\n        e.removeEventListener('focusout', e.fi)\n      }\n      const onfocusin = (e: FocusEvent) => {\n        e.preventDefault()\n        const payload = focusEventToPayload(e)\n        connection.send({\n          handle_id,\n          kind: { type: \"FocusOut\", content: payload }\n        })\n      }\n      elem.addEventListener(\"focusout\", onfocusin)\n      e.fi = onfocusin\n    } else if (event === \"Resize\") {\n      const ro = new ResizeObserver((entries) => {\n        for (let entry of entries) {\n          let target: any = null\n          if (entry.target !== null || entry.target as Element !== null) {\n            const targetElem = entry.target as Element\n            target = {\n              element_name: targetElem.tagName,\n              client_height: targetElem.clientHeight,\n              client_width: targetElem.clientWidth,\n              client_left: targetElem.clientLeft,\n              client_top: targetElem.clientTop,\n              scroll_height: targetElem.scrollHeight,\n              scroll_width: targetElem.scrollWidth,\n              scroll_left: targetElem.scrollLeft,\n              scroll_top: targetElem.scrollTop,\n            }\n          }\n          connection.send({\n            handle_id,\n            kind: { type: \"Resize\", content: target }\n          })\n        }\n      })\n      ro.observe(elem)\n      e[\"ro\"] = ro\n    } else {\n      e[`on${event.toLowerCase()}`] = (e: Event) => {\n        e.preventDefault()\n        if (e instanceof DragEvent) {\n          const payload = dragEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else if (e instanceof FocusEvent) {\n          const payload = focusEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else if (e instanceof InputEvent) {\n          const payload = inputEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else if (e instanceof MouseEvent) {\n          const payload = mouseEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else if (e instanceof TouchEvent) {\n          const payload = touchEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else if (e instanceof WheelEvent) {\n          const payload = wheelEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else if (e instanceof SubmitEvent) {\n          const payload = submitEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else if (e instanceof PointerEvent) {\n          const payload = pointerEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else if (e instanceof KeyboardEvent) {\n          const payload = keyboardEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else if (e instanceof ProgressEvent) {\n          const payload = progressEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else if (e instanceof AnimationEvent) {\n          const payload = animationEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else if (e instanceof TransitionEvent) {\n          const payload = transitionEventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        } else {\n          const payload = eventToPayload(e)\n          connection.send({\n            handle_id,\n            kind: { type: event, content: payload }\n          })\n        }\n      }\n    }\n  }\n\n  for (const event of Object.keys(VNodeEventType).filter(\n    (key) => !handle_events.includes(key as VNodeEventType) && !handle_prevent_default_events.includes(key as VNodeEventType)\n  )) {\n    if (event === \"Cancel\") {\n      if (e.c instanceof Function) {\n        e.removeEventListener('cancel', e.c)\n      }\n    } else if (event === \"FocusIn\") {\n      if (e.fi instanceof Function) {\n        e.removeEventListener('focusin', e.fi)\n      }\n    } else if (event === \"FocusOn\") {\n      if (e.fo instanceof Function) {\n        e.removeEventListener('focusout', e.fo)\n      }\n    } else if (event === \"Resize\") {\n      if (e.ro instanceof ResizeObserver) {\n        e.ro.disconnect()\n      }\n    } else {\n      e[`on${event.toLowerCase()}`] = null\n    }\n  }\n}\n","import { DifferenceCommand, StyleDifferenceCommand } from \"./rustTypes\"\nimport { applyEvent } from \"./applyEvent\"\n\n// apply VNode difference command to DOM\nexport function applyCommand(root: Node, cmd: DifferenceCommand) {\n  if (cmd.type === \"UpdateElement\") {\n    const { index, class_diff, props_diff, event_diff, children } = cmd.content\n    const element = root.childNodes[index]\n    if (element === undefined) return\n\n    if (element instanceof HTMLElement) {\n      // update class\n      for (const diff of class_diff) {\n        if (diff.type === \"Add\") {\n          element.classList.add(diff.content)\n        } else if (diff.type === \"Remove\") {\n          element.classList.remove(diff.content)\n        }\n      }\n\n      // update props\n      for (const diff of props_diff) {\n        if (diff.type === \"Add\") {\n          if (diff.content.split(\"=\").length === 2) {\n            const [key, value] = diff.content.split(\"=\")\n            element.setAttribute(key, value)\n          } else {\n            element.setAttribute(diff.content, \"true\")\n          }\n        } else if (diff.type === \"Remove\") {\n          if (diff.content.split(\"=\").length === 2) {\n            const [key, _value] = diff.content.split(\"=\")\n            element.removeAttribute(key)\n          } else {\n            element.removeAttribute(diff.content)\n          }\n        }\n      }\n\n      // update events\n      if (event_diff.type === \"Update\") {\n        const event = event_diff.content\n        applyEvent(element, event)\n      }\n    }\n\n    for (const child_cmd of children) {\n      applyCommand(element, child_cmd)\n    }\n  } else if (cmd.type === \"UpdateText\") {\n    const { index, new_text } = cmd.content\n    const text = root.childNodes[index]\n    if (text === undefined) return\n    text.textContent = new_text\n  } else if (cmd.type === \"ReplaceToElement\") {\n    const { index, new_tag, classes, props, event, children } = cmd.content\n    const element = root.childNodes[index]\n    if (element === undefined) return\n\n    // create new element to replace\n    const new_element = document.createElement(new_tag)\n\n    // add classes\n    new_element.classList.add(...classes)\n\n    // add props\n    for (const prop of props) {\n      if (prop.split(\"=\").length === 2) {\n        const [key, value] = prop.split(\"=\")\n        new_element.setAttribute(key, value)\n      } else {\n        new_element.setAttribute(prop, \"true\")\n      }\n    }\n\n    // add events\n    applyEvent(new_element, event)\n\n    for (const child_cmd of children) {\n      applyCommand(new_element, child_cmd)\n    }\n\n    // replace element with new element\n    root.replaceChild(new_element, element)\n  } else if (cmd.type === \"ReplaceToText\") {\n    const { index, text } = cmd.content\n    const element = root.childNodes[index]\n    if (element === undefined) return\n\n    // create new text to replace\n    const new_text = document.createTextNode(text)\n\n    // replace element with new text\n    root.replaceChild(new_text, element)\n  } else if (cmd.type === \"InsertElement\") {\n    const { index, tag, classes, props, event, children } = cmd.content\n\n    // create new element\n    const new_element = document.createElement(tag)\n\n    // add classes\n    new_element.classList.add(...classes)\n\n    // add props\n    for (const prop of props) {\n      if (prop.split(\"=\").length === 2) {\n        const [key, value] = prop.split(\"=\")\n        new_element.setAttribute(key, value)\n      } else {\n        new_element.setAttribute(prop, \"true\")\n      }\n    }\n\n    // add events\n    applyEvent(new_element, event)\n\n    for (const child_cmd of children) {\n      applyCommand(new_element, child_cmd)\n    }\n\n    // insert element\n    root.insertBefore(new_element, root.childNodes[index])\n  } else if (cmd.type === \"InsertText\") {\n    const { index, text } = cmd.content\n\n    // create new text\n    const new_text = document.createTextNode(text)\n\n    // insert text\n    root.insertBefore(new_text, root.childNodes[index])\n  } else if (cmd.type === \"Remove\") {\n    const { index } = cmd.content\n    const element = root.childNodes[index]\n    if (element === undefined) return\n    root.removeChild(element)\n  }\n}\n\n// apply style difference command to DOM\nexport function applyStyleCommand(cmd: StyleDifferenceCommand) {\n  if (cmd.type === \"AddStyle\") {\n    const { class_name, value } = cmd.content\n    const head = document.head || document.getElementsByTagName(\"head\")[0]\n    const style = document.createElement(\"style\")\n\n    style.id = class_name\n    style.appendChild(document.createTextNode(value))\n\n    head.appendChild(style)\n  } else if (cmd.type === \"RemoveStyle\") {\n    const { class_name } = cmd.content\n    document.getElementById(class_name)?.remove()\n  }\n}\n","import { DifferenceCommands } from \"./rustTypes\";\nimport connection from \"./connection\";\nimport { applyCommand, applyStyleCommand } from \"./applyCommand\";\n\nconst main = async () => {\n  const update = () => {\n    connection.send(\"DRAW\")\n    requestAnimationFrame(update)\n  }\n\n  connection.onopen(() => {\n    update()\n  })\n\n  const appRoot = document.querySelector<HTMLDivElement>('#app')\n  const portalRoot = document.querySelector<HTMLDivElement>('#portal')\n\n  connection.oncommand((cmds: DifferenceCommands) => {\n    if (appRoot === null || portalRoot === null) return\n\n    for (const cmd of cmds.main) {\n      applyCommand(appRoot, cmd)\n    }\n    for (const cmd of cmds.portals) {\n      applyCommand(portalRoot, cmd)\n    }\n    for (const cmd of cmds.styles) {\n      applyStyleCommand(cmd)\n    }\n  })\n}\n\ndocument.addEventListener('DOMContentLoaded', main)\n"],"names":["path","paths","i","websocket","send","obj","onopen","callback","oncommand","evt","cmds","connection","VNodeEventType","eventToPayload","e","target","mouseEventToPayload","targetElem","related_target","relatedTargetElem","focusEventToPayload","dragEventToPayload","inputEventToPayload","_a","keyboardEventToPayload","progressEventToPayload","submitEventToPayload","submitter","submitter_elem","wheelEventToPayload","animationEventToPayload","pointerEventToPayload","touchEventToPayload","changed_touches","touch","touchTarget","touchTargetElem","target_touches","touches","transitionEventToPayload","applyEvent","elem","eventHandle","handle_id","handle_events","handle_prevent_default_events","event","oncancel","payload","onfocusin","ro","entries","entry","key","applyCommand","root","cmd","index","class_diff","props_diff","event_diff","children","element","diff","value","_value","child_cmd","new_text","text","new_tag","classes","props","new_element","prop","tag","applyStyleCommand","class_name","head","style","main","update","appRoot","portalRoot"],"mappings":"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"}